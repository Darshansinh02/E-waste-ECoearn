<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECOEarn - E-Waste Management System</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="page active">
        <div class="container">
            <div class="login-wrapper">
                <div class="header">
                    <h1 class="logo">‚ôª ECOEarn</h1>
                    <p class="subtitle">E-Waste Management System</p>
                </div>

                <div class="form-container">
                    <h2>Welcome Back</h2>
                    <p class="form-subtitle">Sign in to your ECOEarn account</p>

                    <form id="loginForm" class="form">
                        <div class="form-group">
                            <label for="loginEmail">Email Address</label>
                            <div class="input-wrapper">
                                <span class="input-icon">‚úâ</span>
                                <input type="email" id="loginEmail" placeholder="Enter your email" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <div class="input-wrapper">
                                <span class="input-icon">üîí</span>
                                <input type="password" id="loginPassword" placeholder="Enter your password" required>
                                <span class="toggle-password" onclick="togglePassword('loginPassword')">üëÅ</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Security Verification</label>
                            <div class="captcha-container">
                                <span id="captchaQuestion">7 + 2 = ?</span>
                                <span class="refresh-btn" onclick="generateCaptcha()">üîÑ</span>
                                <input type="number" id="captchaAnswer" placeholder="9" maxlength="2">
                                <span id="captchaCheck" class="check-mark">‚úì</span>
                            </div>
                        </div>

                        <div class="form-group checkbox">
                            <input type="checkbox" id="rememberMe">
                            <label for="rememberMe">Remember me</label>
                        </div>

                        <button type="submit" class="btn btn-primary">Sign In</button>
                        <div class="error-message" id="loginError"></div>
                    </form>

                    <p class="form-footer">
                        Don't have an account? <a href="#" onclick="switchPage('signupPage')">Sign up</a>
                    </p>
                    <p class="forgot-password">
                        <a href="#" onclick="alert('Password reset feature coming soon!')">Forgot password?</a>
                    </p>
                </div>

                <div class="footer">
                    <p>Protecting our environment, one device at a time</p>
                    <p>¬© 2025 ECOEarn. All rights reserved.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Page -->
    <div id="signupPage" class="page">
        <div class="container">
            <div class="signup-wrapper">
                <div class="header">
                    <h1 class="logo">‚ôª ECOEarn</h1>
                    <p class="subtitle">E-Waste Management System</p>
                </div>

                <div class="form-container">
                    <h2>Create Account</h2>
                    <p class="form-subtitle">Join ECOEarn and start contributing</p>

                    <form id="signupForm" class="form">
                        <div class="form-group">
                            <label for="signupEmail">Email Address</label>
                            <div class="input-wrapper">
                                <span class="input-icon">‚úâ</span>
                                <input type="email" id="signupEmail" placeholder="Enter your email" required>
                            </div>
                            <span class="form-hint" id="emailStatus"></span>
                        </div>

                        <div class="form-group">
                            <label for="signupPassword">Password (Minimum 6 characters)</label>
                            <div class="input-wrapper">
                                <span class="input-icon">üîí</span>
                                <input type="password" id="signupPassword" placeholder="Enter password" minlength="6" required>
                                <span class="toggle-password" onclick="togglePassword('signupPassword')">üëÅ</span>
                            </div>
                            <span class="form-hint">Numbers, letters, and symbols allowed</span>
                        </div>

                        <div class="form-group">
                            <label for="confirmPassword">Confirm Password</label>
                            <div class="input-wrapper">
                                <span class="input-icon">üîí</span>
                                <input type="password" id="confirmPassword" placeholder="Confirm password" minlength="6" required>
                                <span class="toggle-password" onclick="togglePassword('confirmPassword')">üëÅ</span>
                            </div>
                            <span class="form-hint" id="passwordMatch"></span>
                        </div>

                        <div class="form-group">
                            <label>Security Verification</label>
                            <div class="captcha-container">
                                <span id="signupCaptchaQuestion">7 + 2 = ?</span>
                                <span class="refresh-btn" onclick="generateSignupCaptcha()">üîÑ</span>
                                <input type="number" id="signupCaptchaAnswer" placeholder="9" maxlength="2">
                                <span id="signupCaptchaCheck" class="check-mark">‚úì</span>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary">Sign Up</button>
                        <div class="error-message" id="signupError"></div>
                    </form>

                    <p class="form-footer">
                        Already have an account? <a href="#" onclick="switchPage('loginPage')">Sign in</a>
                    </p>
                </div>

                <div class="footer">
                    <p>Protecting our environment, one device at a time</p>
                    <p>¬© 2025 ECOEarn. All rights reserved.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Setup Page -->
    <div id="profilePage" class="page">
        <div class="container">
            <div class="profile-wrapper">
                <div class="header">
                    <h1 class="logo">‚ôª ECOEarn</h1>
                    <p class="subtitle">Complete Your Profile</p>
                </div>

                <div class="form-container">
                    <h2>Profile Setup</h2>
                    <p class="form-subtitle">Complete your profile to get started</p>

                    <form id="profileForm" class="form">
                        <!-- Profile Photo Upload -->
                        <div class="form-group">
                            <label>Profile Photo (JPG/PNG only - Optional)</label>
                            <div class="photo-upload-wrapper">
                                <div class="photo-preview" id="photoPreview">
                                    <div class="placeholder">üì∑</div>
                                </div>
                                <div class="photo-controls">
                                    <input type="file" id="profilePhoto" accept=".jpg,.jpeg,.png" style="display: none;">
                                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('profilePhoto').click()">
                                        Upload Photo
                                    </button>
                                    <button type="button" class="btn btn-secondary" onclick="viewProfile()">
                                        View Profile
                                    </button>
                                </div>
                            </div>
                            <span class="form-hint" id="photoStatus"></span>
                        </div>

                        <!-- Username -->
                        <div class="form-group">
                            <label for="username">Username *</label>
                            <div class="input-wrapper">
                                <span class="input-icon">üë§</span>
                                <input type="text" id="username" placeholder="Choose a username (letters, numbers, symbols)" required>
                            </div>
                            <span class="form-hint">Username is mandatory and must be unique</span>
                        </div>

                        <!-- Birthdate -->
                        <div class="form-group">
                            <label for="birthdate">Birthdate * (DD/MM/YYYY)</label>
                            <div class="birthdate-container">
                                <div class="input-wrapper" style="flex: 1;">
                                    <span class="input-icon">üìÖ</span>
                                    <input type="text" id="birthdateInput" placeholder="DD/MM/YYYY" maxlength="10" required>
                                </div>
                                <button type="button" class="btn-date-picker" onclick="openDatePicker()">üìÖ Pick</button>
                                <input type="date" id="birthdatePickerHidden" style="display: none;">
                            </div>
                            <span class="form-hint">You can type (DD/MM/YYYY) or click the Pick button</span>
                            <span class="form-hint" id="birthdateStatus"></span>
                        </div>

                        <!-- Address -->
                        <div class="form-group">
                            <label for="address">Address (Maximum 200 words) *</label>
                            <textarea id="address" placeholder="Enter your address" maxlength="1000" rows="4" required></textarea>
                            <span class="form-hint"><span id="wordCount">0</span>/200 words</span>
                        </div>

                        <!-- Terms & Privacy -->
                        <div class="form-group checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="termsCheckbox" required>
                                <label for="termsCheckbox">I agree to the <a href="#" onclick="showTerms()">Terms and Conditions</a></label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="privacyCheckbox" required>
                                <label for="privacyCheckbox">I agree to the <a href="#" onclick="showPrivacy()">Privacy Policy</a></label>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary">Complete Profile</button>
                        <div class="error-message" id="profileError"></div>
                    </form>

                    <button type="button" class="btn btn-secondary logout-btn" onclick="logout()">Log Out</button>
                </div>

                <div class="footer">
                    <p>Protecting our environment, one device at a time</p>
                    <p>¬© 2025 ECOEarn. All rights reserved.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Page (After Profile Complete) -->
    <div id="dashboardPage" class="page">
        <div class="dashboard-wrapper">
            <nav class="navbar">
                <div class="navbar-left">
                    <h1 class="logo">‚ôª ECOEarn</h1>
                </div>
                <div class="navbar-center">
                    <ul class="nav-menu">
                        <li><a href="#" onclick="switchPage('dashboardPage')" class="nav-link active">Dashboard</a></li>
                        <li><a href="#" onclick="switchPage('submitWastePage')" class="nav-link">Submit Waste</a></li>
                        <li><a href="#" onclick="switchPage('rewardShopPage')" class="nav-link">Reward Shop</a></li>
                    </ul>
                </div>
                <div class="navbar-right">
                    <span id="userGreeting" class="user-greeting">Welcome!</span>
                    <button onclick="logout()" class="btn btn-secondary">Log Out</button>
                </div>
            </nav>

            <div class="dashboard-content">
                <div class="user-profile-card">
                    <div class="user-photo-large" id="userPhotoLarge">üì∑</div>
                    <h2 id="dashboardUsername">User</h2>
                    <p id="dashboardEmail">email@example.com</p>
                    <button onclick="switchPage('profilePage')" class="btn btn-secondary">Edit Profile</button>
                </div>

                <div class="dashboard-section">
                    <h3>Your Statistics</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">0</div>
                            <div class="stat-label">Devices Recycled</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">0</div>
                            <div class="stat-label">Points Earned</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">0</div>
                            <div class="stat-label">Days Active</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Submit Waste Page -->
    <div id="submitWastePage" class="page">
        <div class="dashboard-wrapper">
            <nav class="navbar">
                <div class="navbar-left">
                    <h1 class="logo">‚ôª ECOEarn</h1>
                </div>
                <div class="navbar-center">
                    <ul class="nav-menu">
                        <li><a href="#" onclick="switchPage('dashboardPage')" class="nav-link">Dashboard</a></li>
                        <li><a href="#" onclick="switchPage('submitWastePage')" class="nav-link active">Submit Waste</a></li>
                        <li><a href="#" onclick="switchPage('rewardShopPage')" class="nav-link">Reward Shop</a></li>
                    </ul>
                </div>
                <div class="navbar-right">
                    <span id="userGreeting2" class="user-greeting">Welcome!</span>
                    <button onclick="logout()" class="btn btn-secondary">Log Out</button>
                </div>
            </nav>

            <div class="dashboard-content">
                <div class="content-header">
                    <h2>Submit E-Waste</h2>
                    <p>Help protect the environment by submitting your electronic waste</p>
                </div>

                <div class="submit-waste-container">
                    <form id="submitWasteForm" class="waste-form">
                        <!-- E-Waste Photo Upload -->
                        <div class="form-group">
                            <label>E-Waste Photo *</label>
                            <div class="photo-upload-section">
                                <div class="photo-preview" id="ewastePhotoPreview" style="display: none;">
                                    <img id="ewastePhotoImg" src="" alt="E-waste preview">
                                    <button type="button" class="btn-remove-photo" onclick="removeEwastePhoto()">‚úï Remove</button>
                                </div>
                                <div class="photo-upload-controls">
                                    <input type="file" id="ewastePhotoUpload" accept="image/jpeg,image/png" style="display: none;">
                                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('ewastePhotoUpload').click()">üìÅ Upload Photo</button>
                                    <button type="button" class="btn btn-secondary" onclick="openEwasteCamera()">üì∑ Take Picture</button>
                                </div>
                                <p class="form-hint">JPG or PNG only, max 5MB</p>
                            </div>
                        </div>

                        <!-- Waste Type Selection -->
                        <div class="form-group">
                            <label for="wasteType">E-Waste Category *</label>
                            <select id="wasteType" required>
                                <option value="">-- Select E-Waste Type --</option>
                                <option value="mobile">Mobile Phone</option>
                                <option value="laptop">Laptop/Computer</option>
                                <option value="tablet">Tablet</option>
                                <option value="printer">Printer</option>
                                <option value="monitor">Monitor/Display</option>
                                <option value="keyboard">Keyboard</option>
                                <option value="mouse">Mouse/Peripherals</option>
                                <option value="charger">Charger/Cables</option>
                                <option value="other">Other Electronics</option>
                            </select>
                        </div>

                        <!-- Waste Quantity -->
                        <div class="form-group">
                            <label for="wasteQuantity">Quantity (in kg) *</label>
                            <input type="number" id="wasteQuantity" placeholder="Enter weight in kg" min="0.1" step="0.1" required>
                        </div>

                        <!-- Waste Condition -->
                        <div class="form-group">
                            <label for="wasteCondition">Condition *</label>
                            <select id="wasteCondition" required>
                                <option value="">-- Select Condition --</option>
                                <option value="working">Working</option>
                                <option value="broken">Broken</option>
                                <option value="damaged">Damaged</option>
                                <option value="unknown">Unknown</option>
                            </select>
                        </div>

                        <!-- Waste Description -->
                        <div class="form-group">
                            <label for="wasteDescription">Description (Optional)</label>
                            <textarea id="wasteDescription" placeholder="Describe your e-waste (optional)" rows="4" maxlength="500"></textarea>
                            <span class="form-hint"><span id="descriptionCount">0</span>/500 characters</span>
                        </div>

                        <!-- Collection Method -->
                        <div class="form-group">
                            <label>Collection Method *</label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" id="homePickup" name="collectionMethod" value="home" required>
                                    <label for="homePickup">Home Pickup</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" id="dropCenter" name="collectionMethod" value="center">
                                    <label for="dropCenter">Drop at Center</label>
                                </div>
                            </div>
                        </div>

                        <!-- Collection Address (if home pickup) -->
                        <div class="form-group" id="addressGroup" style="display: none;">
                            <label for="collectionAddress">Collection Address *</label>
                            <textarea id="collectionAddress" placeholder="Enter address for pickup" rows="3" maxlength="300"></textarea>
                        </div>

                        <button type="submit" class="btn btn-primary">Submit E-Waste</button>
                        <div class="error-message" id="submitWasteError"></div>
                        <div class="success-message" id="submitWasteSuccess"></div>
                    </form>

                    <div class="submission-stats">
                        <h3>Your Submissions</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number" id="totalSubmissions">0</div>
                                <div class="stat-label">Total Submissions</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="totalWeight">0</div>
                                <div class="stat-label">kg Recycled</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="pointsEarned">0</div>
                                <div class="stat-label">Points Earned</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Reward Shop Page -->
    <div id="rewardShopPage" class="page">
        <div class="dashboard-wrapper">
            <nav class="navbar">
                <div class="navbar-left">
                    <h1 class="logo">‚ôª ECOEarn</h1>
                </div>
                <div class="navbar-center">
                    <ul class="nav-menu">
                        <li><a href="#" onclick="switchPage('dashboardPage')" class="nav-link">Dashboard</a></li>
                        <li><a href="#" onclick="switchPage('submitWastePage')" class="nav-link">Submit Waste</a></li>
                        <li><a href="#" onclick="switchPage('rewardShopPage')" class="nav-link active">Reward Shop</a></li>
                    </ul>
                </div>
                <div class="navbar-right">
                    <span id="userGreeting3" class="user-greeting">Welcome!</span>
                    <button onclick="logout()" class="btn btn-secondary">Log Out</button>
                </div>
            </nav>

            <div class="dashboard-content">
                <div class="content-header">
                    <h2>Reward Shop</h2>
                    <p>Exchange your points for amazing rewards</p>
                </div>

                <div class="reward-shop-container">
                    <!-- User Points Display -->
                    <div class="user-points-card">
                        <h3>Your Points Balance</h3>
                        <div class="points-display" id="pointsBalance">0</div>
                        <p class="points-label">Points Available</p>
                    </div>

                    <!-- Rewards Grid -->
                    <div class="rewards-grid" id="rewardsGrid">
                        <!-- Rewards will be dynamically loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/auth.js"></script>
    <script src="js/validation.js"></script>
</body>
</html>
